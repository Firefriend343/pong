<html>
  <head>
    <title>Pong Game</title>
  
    <style>
      body { background:darkgray; }
      img { position:absolute; image-rendering:pixelated; transform-origin: 50% 50%; }
      div { position:absolute; }
      #game-container { }
      #paddle { top:100px; left:100px; width:150px; height:40px; border-radius:5px; transition:0.15s; }
      #paddle-container { }
      #ball-container { display:none; }
      #ball { top:100px; left:300px; height:49px; width:49px; border-radius:50%; }
      .ball {  }
    </style>
  </head>
  <body>
  
    <div id="game-container">
      <div id="paddle-container"><img id="paddle" src="pong-paddle.png"></img></div>
      <div id="ball-container"><img class="ball" id="ball" src="pong-ball.png"></img></div>
    </div>
  
    <script>
      var paddle = $("paddle");
      var paddleDeg = 0;
      var localDegree = paddleDeg + "deg";
      var startDifficulty = null;
      var gameLoop = 0;
      var allBalls = $$('.ball');
      
      function $ (id) {
        return document.getElementById(id);
      }
      function $$ (sel) {
        return document.querySelectorAll(sel);
      }
      
      function startingDifficulty() {
        startDifficulty = prompt("Select your number of difficulty(1-5).");
        paddle.style.top = "100px";
        paddle.style.left = "100px";
      }
      
      document.addEventListener('keydown', idKey);   
      function idKey(e) {
        if (e.code == "ArrowRight") {
          paddleDeg = Number(paddleDeg + 15);
          localDegree = paddleDeg + "deg";
          paddle.style.transform = "rotate(" + localDegree + ")";         
          console.log("turn-right");
        }
        else if (e.code == "ArrowLeft") {
          paddleDeg = Number(paddleDeg - 15);
          localDegree = paddleDeg + "deg";
          paddle.style.transform = "rotate(" + localDegree + ")";         
          console.log("turn-left");
        }
        else if (e.code == "ArrowUp") {
          paddle.style.top = Number(Number(paddle.style.top.split("p")[0]) - 15 - startDifficulty / 1.5) + "px";
        }
        else if (e.code == "ArrowDown") {
          paddle.style.top = Number(Number(paddle.style.top.split("p")[0]) + 15 + startDifficulty / 1.5) + "px";
        }
        else {
          console.log("wrong key");
        }
      }
      
      function startGame() {
        console.log("game begins");
        ///3,2,1 thing
        setTimeout(function(){
          gamePlayLoop();
        }, 5000);
      }
      
      function gamePlayLoop() {
        var ball = $("ball");
        var container = $("game-container");
        var newBall = ball.cloneNode(false);
        newBall.id = ball.id + "-" + Number(gameLoop + 1);
        newBall.style.display = "block";
        var randomTop = Number(Math.floor(Math.random() * 600 + 100));
        newBall.style.top = randomTop + "px";
        newBall.style.left = "500px";
        newBall.src = ball.src;
        newBall.style.transition = Number(6 / startDifficulty) + "s";
        container.appendChild(newBall);
        allBalls = $$('.ball');
        console.log("loop1");
        for (const bEl of allBalls) {
          bEl.style.left = Number(bEl.style.left.split("p")[0] - 20) + "px";
        }
        setTimeout(function(){
          gamePlayLoop2();
        }, Number(6000 / startDifficulty));
      }
      
      function gamePlayLoop2() {
        console.log("loop2");
        for (const bEl of allBalls) {
          bEl.style.left = Number(bEl.style.left.split("p")[0] - 20) + "px";
        }
        gameLoop++;
        setTimeout(function(){
          gamePlayLoop();
        }, Number(6000 / startDifficulty));
      }
      
      ///All opening functions
      startingDifficulty();
      startGame();
      
    </script>
  </body>
</html>
<!--Version 0.53-->
